{% spaceless %}
<figure
    {% if node.hasOption('figclass') %} class="{{ node.option('figclass') }}"{% endif %}
    {% if node.hasOption('figwidth') %} style="{% if node.hasOption('figwidth') %}width: {{ node.option('figwidth') }};{% endif %}"{% endif %}
>
    {{ renderNode(node.image) }}

    {% if node.document %}
        {% set caption = renderNode(node.document) %}

        {% if caption %}
            <figcaption>{{ caption|raw }}</figcaption>
        {% endif %}
    {% endif %}
</figure>
{% endspaceless %}
